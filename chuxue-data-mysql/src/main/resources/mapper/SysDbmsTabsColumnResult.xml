<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.chuxue.application.dbms.tabs.dao.SysDbmsTabsColumnResultDao">
   
    <select id="findAllByTabUuid"  resultType="org.chuxue.application.dbms.tabs.po.SysDbmsTabsColumnResult">
       SELECT UUID() AS UUID
	       ,#{tabsUuid} AS TABS_UUID
	       ,COLUMN_NAME AS COLS_NAME
	       ,CHARACTER_MAXIMUM_LENGTH AS COLS_LENGTH
	       ,COLUMN_TYPE AS COLS_TYPE
 	       ,IS_NULLABLE AS NULLABLE
		   ,DATA_TYPE as DATA_TYPE
 	       ,COLUMN_COMMENT AS COLS_DESC
	       ,ORDINAL_POSITION AS SORT  
       FROM INFORMATION_SCHEMA.COLUMNS C 
       <where>
       <if test="tabsName!=null">
       		and concat('`',TABLE_SCHEMA,'`.`',TABLE_NAME,'`') = #{tabsName}
       </if>
              <if test="list != null and list.size()>0">
	       and COLUMN_NAME  NOT IN 
	        <foreach collection="list" item="idItem" open="(" close=")" separator="," index="idIndex">
	            #{idItem}
	        </foreach>
        </if>
       </where>
    </select>

</mapper>